# Maintainer: ArchStrike <team@archstrike.org>

buildarch=220

pkgname=rcracki-mt
pkgver=0.7.0
pkgrel=3
groups=('archstrike' 'archstrike-crackers')
pkgdesc="A tool to perform rainbow table attacks on password hashes. It is intended for indexed/perfected rainbow tables, mainly generated by the distributed project www.freerainbowtables.com"
url='http://rcracki.sourceforge.net/'
depends=('openssl')
license=('GPL')
replaces=('rcracki_mt')
conflicts=('rcracki_mt')
provides=('rcracki_mt')
source=("http://downloads.sourceforge.net/project/rcracki/rcracki_mt/rcracki_mt_$pkgver/rcracki_mt_${pkgver}_src.7z" "gcc6.1.fixes.patch")
sha512sums=('f93dc1d7ca1f18c63a9612b053d86ad639589e2534361c2fb3d3c064c162002798082bc1219737ae9567a23daa6ef7a0f7a52e7debbeb8ceceb2e1724c71bf0d'
            'f079b71d94ca87f7deb223a8a847974142ca80c958ec7530999faac628440855d1d1687fbbafeb5e4e48f14ed32df66cc438aae54099edb9049d7d56c87bbeea')
arch=('i686' 'x86_64' 'armv6h' 'armv7h' 'aarch64')

prepare() {
  cd "$srcdir/rcracki_mt_${pkgver}_src/"
  patch -Np1 -i $srcdir/gcc6.1.fixes.patch
}

build() {
  cd "$srcdir/rcracki_mt_${pkgver}_src/rcracki_mt"
  make
}

package() {
  cd "$srcdir/rcracki_mt_${pkgver}_src/rcracki_mt"
  make "DESTDIR=$pkgdir" install
}
